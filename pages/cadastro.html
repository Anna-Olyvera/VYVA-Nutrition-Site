<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles/geral.css">
  <link rel="stylesheet" href="../styles/loginCadastro.css">
  <title>VYVA Nutrition</title>
  <script>
    async function cadastrar(event) {
      event.preventDefault();

      const nome = document.getElementById("nome").value;
      const telefone = document.getElementById("telefone").value;
      const email = document.getElementById("email").value;
      const senha = document.getElementById("senha").value;
      const confirmacao = document.getElementById("confirmacao").value;
      const mensagem = document.getElementById("mensagem");

      if (senha !== confirmacao) {
        mensagem.textContent = "As senhas não coincidem.";
        mensagem.style.color = "red";
        return;
      }

      try {
        const resposta = await fetch("https://backend-r4hs.onrender.com/cadastro", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ nome, telefone, email, senha })
        });

        const data = await resposta.json();

        if (data.sucesso) {
          mensagem.textContent = "Cadastro realizado com sucesso!";
          mensagem.style.color = "green";
          console.log("Usuário cadastrado:", data.localId);
        } else {
          mensagem.textContent = "Erro: " + data.mensagem;
          mensagem.style.color = "red";
        }
      } catch (err) {
        mensagem.textContent = "Erro de conexão com o servidor.";
        mensagem.style.color = "red";
        console.error("Erro de rede:", err);
      }
    }
  </script>
</head>
<body>
  <header>
    <img src="../img/logo/VYVA-NUTRITION-1.png" alt="Logo da marca VYVA Nutrition">
    <img class="menu-hamburguer" src="../img/icones/material-symbols--menu-rounded.svg" alt="menu hamburguer">
    <nav>
      <ul>
        <li><a href="/">Início</a></li>
        <li><a href="funcionamento.html">Como Funciona</a></li>
        <li><a href="cadastro.html">Cadastre-se</a></li>
      </ul>
      <button><a href="login.html">Entrar</a></button>
    </nav>
  </header>

  <main>
    <h1>Cadastre-se</h1>

    <form onsubmit="cadastrar(event)">
      <label for="nome">Nome Completo*</label>
      <input type="text" placeholder="Nome Completo" required name="nome" id="nome">

      <label for="telefone">Telefone*</label>
      <input type="text" placeholder="+00 00 00000-0000" required name="telefone" id="telefone">

      <label for="email">E-mail</label>
      <input type="email" placeholder="seuemail@email.com" required name="email" id="email">

      <label for="senha">Senha*</label>
      <input type="password" placeholder="********" required name="senha" id="senha">

      <label for="confirmacao">Confirmação de Senha*</label>
      <input type="password" placeholder="********" required name="confirmacao" id="confirmacao">

      <button type="submit">Cadastrar</button>
      <p id="mensagem"></p>
    </form>
  </main>

  <footer>
    <p>© 2025 VYVA Nutrition. Todos os direitos reservados.</p>
  </footer>

  <script src="scripts/menuHamburguer.js"></script>
</body>
</html>
